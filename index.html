<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Miru Coffee - Official Website</title>
  <link rel="stylesheet" href="style-shared.css">
  <link rel="stylesheet" href="style-index.css">
</head>
<body>
  <!-- 共用頁首 -->
  <header id="shared-header"></header>

  <main>
    <div class="content">

      <!-- Welcome Hero Section -->
      <section class="card hero-section">
        <div class="hero-flex">
          <div class="hero-text" id="hero-content">
            <!-- Content will be loaded from MSG/002 hero.txt -->
          </div>
          <div class="hero-image">
            <img src="IMG/Equipment/EQ002 Air Roaster.png" alt="Miru Air Roaster">
          </div>
        </div>
      </section>

      <!-- Bean Type Category Section -->
      <section class="card bean-type-section">
        <h2>Explore Our Green Coffee Origins</h2>
        <div class="bean-type-gallery">
          <a href="beans.html?code=C1001"><img src="IMG/Bean/C1001.png" alt="C1001"></a>
          <a href="beans.html?code=C1002"><img src="IMG/Bean/C1002.png" alt="C1002"></a>
          <a href="beans.html?code=C1003"><img src="IMG/Bean/C1003.png" alt="C1003"></a>
          <a href="beans.html?code=C1004"><img src="IMG/Bean/C1004.png" alt="C1004"></a>
          <a href="beans.html?code=C1005"><img src="IMG/Bean/C1005.png" alt="C1005"></a>
        </div>
      </section>

      <!-- Recent Roasts -->
      <section class="card">
        <h2>Recent Roasts</h2>
        <div class="roast-gallery">
          <img src="IMG/Product/PROD-1.png" alt="Previous" class="coffee-pack">
          <img src="IMG/Product/PROD-2.png" alt="Previous 2nd" class="coffee-pack">
          <img src="IMG/Product/PROD-3.png" alt="Previous 3rd" class="coffee-pack">
          <img src="IMG/Product/PROD-4.png" alt="Previous 4th" class="coffee-pack">
        </div>
      </section>

      <!-- Next Roast -->
      <section class="card">
        <h2>Next Roast Preview</h2>
        <div class="roast-preview">
          <img src="IMG/Product/PROD-0.png" alt="Coming Roast" class="coffee-pack-large">
        </div>
      </section>

    </div>
  </main>

  <!-- 共用頁尾 -->
  <footer id="shared-footer"></footer>

  <!-- Shared Header + Footer Loader -->
  <script>
    const savedScrollY = window.scrollY;
    fetch('shared/header.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('shared-header').innerHTML = html;
        return fetch('MSG/001 announcement.txt');
      })
      .then(res => res.text())
      .then(text => {
        const marquee = document.getElementById('announcement-marquee');
        if (marquee) {
          marquee.textContent = text;
          marquee.setAttribute('scrollamount','5');
          marquee.style.fontSize = '20px';
        }
        window.scrollTo(0, savedScrollY);
      });

    fetch('shared/footer.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('shared-footer').innerHTML = html;
      });
  </script>

  <!-- Hero Text Loader -->
  <script>
    fetch('MSG/002 hero.txt')
      .then(res => res.text())
      .then(html => {
        document.getElementById('hero-content').innerHTML = html;
      });
  </script>

  <!-- Image Auto-Versioning (Cache Bypass) -->
  <script>
    const version = Date.now();
    document.querySelectorAll('img').forEach(img => {
      const src = img.getAttribute('src');
      if (src && !src.includes('?v=')) {
        img.src = `${src}?v=${version}`;
      }
    });
  </script>
</body>
</html>
