<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Miru Coffee - Official Website</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- 共用頁首 -->
  <header id="shared-header"></header>

  <main>
    <div class="content">

      <!-- Welcome Hero Section -->
      <section class="card hero-section">
        <div class="hero-flex">
          <div class="hero-text" id="hero-content">
            <!-- Content will be loaded from MSG/002 hero.txt -->
          </div>
          <div class="hero-image">
            <img src="IMG/Equipment/EQ002 Air Roaster.png" alt="Miru Air Roaster">
          </div>
        </div>
      </section>

      <!-- Bean Type Category Section -->
      <section class="card bean-type-section">
        <h2>Explore Our Green Coffee Origins</h2>
        <div class="bean-type-gallery">
          <a href="coffee.html#C1001">
            <img src="IMG/Bean/C1001.png" alt="C1001">
          </a>
          <a href="coffee.html#C1002">
            <img src="IMG/Bean/C1002.png" alt="C1002">
          </a>
          <a href="coffee.html#C1004">
            <img src="IMG/Bean/C1004.png" alt="C1004">
          </a>
          <a href="coffee.html#C1005">
            <img src="IMG/Bean/C1005.png" alt="C1005">
          </a>
        </div>
      </section>

      <!-- Recent Roasts -->
      <section class="card">
        <h2>Recent Roasts</h2>
        <div class="roast-gallery">
          <img src="IMG/Product/PROD-3.png" alt="Previous 3rd" class="coffee-pack">
          <img src="IMG/Product/PROD-2.png" alt="Previous 2nd" class="coffee-pack">
          <img src="IMG/Product/PROD-1.png" alt="Previous" class="coffee-pack">
        </div>
      </section>

      <!-- Next Roast -->
      <section class="card">
        <h2>Next Roast Preview</h2>
        <div class="roast-preview">
          <img src="IMG/Product/PROD-0.png" alt="Coming Roast" class="coffee-pack-large">
        </div>
      </section>

    </div>
  </main>

  <!-- 共用頁尾 -->
  <footer id="shared-footer"></footer>

  <!-- Shared Header + Footer Loader -->
  <script>
    // 載入 Header
    fetch('shared/header.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('shared-header').innerHTML = html;

        // 載入 marquee 文字
        return fetch('MSG/001 announcement.txt');
      })
      .then(res => res.text())
      .then(text => {
        const marquee = document.getElementById('announcement-marquee');
        if (marquee) {
          marquee.textContent = text;
          marquee.setAttribute('scrollamount', '5');
          marquee.style.fontSize = '20px';
        }
      })
      .catch(err => {
        console.error("Failed to load header or marquee", err);
      });

    // 載入 Footer
    fetch('shared/footer.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('shared-footer').innerHTML = html;
      })
      .catch(err => {
        console.error("Failed to load footer", err);
      });
  </script>

  <!-- Hero Text Loader -->
  <script>
    fetch('MSG/002 hero.txt')
      .then(res => res.text())
      .then(html => {
        document.getElementById('hero-content').innerHTML = html;
      })
      .catch(err => {
        console.error("Failed to load hero content", err);
      });
  </script>

  <!-- Image Auto-Versioning (Cache Bypass) -->
  <script>
    const version = Date.now();
    document.querySelectorAll('img').forEach(img => {
      const src = img.getAttribute('src');
      if (src && !src.includes('?v=')) {
        img.src = `${src}?v=${version}`;
      }
    });
  </script>
</body>
</html>
